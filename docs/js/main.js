console.log("functions ready");document.querySelector(".js-page");const g=document.querySelector(".js-search-btn"),f=document.querySelector(".js-search-input"),L=document.querySelector(".js-reset-btn"),l=document.querySelector(".js-drinks-list"),o=document.querySelector(".js-search-warning"),k=document.querySelector(".js-fav-drinks-list");document.querySelectorAll(".js-drink");const d=document.querySelector(".js-delete-all-favs");d.innerHTML='<i class="fa-solid fa-circle-xmark"></i>Borrar todos mis favoritos';let c=[],r=[];const D=s=>{const e=s.currentTarget.parentElement.id,n=r.findIndex(t=>t.idDrink===e);l.querySelectorAll(".js-drinks-list li").forEach(t=>{t.id===e&&t.classList.remove("fav__drink")}),r.splice(n,1),m(),localStorage.setItem("favUserDrinks",JSON.stringify(r)),r.length===0&&d.classList.add("hidden")},m=()=>{d.classList.remove("hidden"),k.innerHTML="";for(const e of r){const n=e.strDrink,i=e.strDrinkThumb,t=e.idDrink;k.innerHTML+=`
            <li class="drinks__section--item js-drink" id="${t}">
                <span class="drink__delete js-delete"><i class="fas fa-times"></i></span>
                <img class="drink__img" src="${i}" alt="${n}">
                <h3 class="drink__name">${n}</h3>
            </li>
        `}document.querySelectorAll(".js-delete").forEach(e=>{e.addEventListener("click",D)}),r.length===0&&d.classList.add("hidden")},p=s=>{console.log(s.currentTarget.id);const e=s.currentTarget.id,n=c.find(t=>t.idDrink===e),i=r.findIndex(t=>t.idDrink===e);if(i!==-1){const t=document.querySelector(".js-delete");t.addEventListener("click",t),r.splice(i,1),s.currentTarget.classList.remove("fav__drink")}else n&&n.idDrink&&(s.currentTarget.classList.add("fav__drink"),r.push(n));m(),localStorage.setItem("favUserDrinks",JSON.stringify(r)),r.length===0&&d.classList.add("hidden")},h=s=>{l.innerHTML="";for(const e of s){const n=e.strDrink;let i=e.strDrinkThumb;i||(i="http://via.placeholder.com/100x100");const t=e.idDrink,a=document.createElement("li");a.classList.add("drinks__section--item"),a.id=t,r.some(v=>v.idDrink===t)&&a.classList.add("fav__drink"),a.innerHTML=`
            <img class="drink__img" src="${i}" alt="${n}">
            <h3 class="drink__name">${n}</h3>
        `,a.addEventListener("click",p),l.appendChild(a)}},_=()=>{const s=f.value;fetch(`https://www.thecocktaildb.com/api/json/v1/1/search.php?s=${s}`).then(e=>e.json()).then(e=>{c=e.drinks,console.log(c),h(c),localStorage.setItem("drinks",JSON.stringify(c))})},S=s=>{s.preventDefault();const e=f.value;if(e==="")o.classList.remove("hidden"),o.innerHTML="Ups, parece que no has elegido un cocktail.<br>Introduce en el buscador el nombre de tu cocktail favorito.";else{o.classList.add("hidden");const n=c.filter(i=>i.strDrink.toLowerCase().includes(e.toLowerCase()));h(n),console.log(n),_()}},j=s=>{s.preventDefault(),r=[],localStorage.removeItem("favUserDrinks"),k.innerHTML="",r.length===0&&d.classList.add("hidden"),l.querySelectorAll(".js-drinks-list li").forEach(n=>{n.classList.remove("fav__drink")})};d.addEventListener("click",j);const u=()=>{const s=JSON.parse(localStorage.getItem("favUserDrinks"));s!==null&&(r=s,m()),fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s=margarita").then(e=>e.json()).then(e=>{const n=e.drinks;console.log(n),h(n),c.push(...n)})},I=s=>{s.preventDefault(),f.value="",c=[],l.innerHTML="",u()};u();g.addEventListener("click",S);L.addEventListener("click",I);
//# sourceMappingURL=main.js.map
